(()=>{"use strict";const t=function(t,e){let o=0;return{length:t,type:e,numHits:o,shipIsSunk:!1,hitLocations:[],hit:function(){o+=1},isSunk:function(){return t===o}}},e=function(){let e=[],o=[],a=new Array(10);for(let t=0;t<a.length;t++)a[t]=new Array(10);for(let t=0;t<a.length;t++)for(let e=0;e<a.length;e++)a[t][e]={isShip:!1,isAttacked:!1};const r={carrier:5,battleship:4,cruiser:3,submarine:3,destroyer:2};function n(){const t=Object.keys(r)[o.length];let e=prompt(`Enter orientation for ${t}`);return"horizontal"!==e&&"vertical"!==e?(alert("Invalid orientation. Please enter horizontal or vertical."),n()):e}function i(t,e,o,r){if("horizontal"===r){if(t+o>a.length)return!1;for(let r=t;r<t+o;r++)if(a[r][e].isShip)return!1}else if("vertical"===r){if(e+o>a.length)return!1;for(let r=e;r<e+o;r++)if(a[t][r].isShip)return!1}return!0}return{missedAttacks:e,ships:o,board:a,placeShips:function(e){for(const[s,c]of Object.entries(r)){let r,l,h;if(e)do{r=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),h=Math.random()<.5?"horizontal":"vertical"}while(!i(r,l,c,h));else for(r=parseInt(prompt(`Enter x coordinate for ${s}`)),l=parseInt(prompt(`Enter y coordinate for ${s}`)),h=n();!i(r,l,c,h);)alert("Invalid placement. Please enter new coordinates."),r=parseInt(prompt(`Enter x coordinate for ${s}`)),l=parseInt(prompt(`Enter y coordinate for ${s}`)),h=n();const d=t(c,s);if(o.push(d),"horizontal"===h)for(let t=r;t<r+c;t++)d.hitLocations[t-r]={x:t,y:l,isHit:!1},a[t][l].isShip=!0,a[t][l].ship=d;else if("vertical"===h)for(let t=l;t<l+c;t++)d.hitLocations[t-l]={x:r,y:t,isHit:!1},a[r][t].isShip=!0,a[r][t].ship=d}},receiveAttack:function(t,o){if(a[t][o].isAttacked=!0,a[t][o].isShip){const e=a[t][o].ship.hitLocations.find((e=>e.x===t&&e.y===o));a[t][o].ship.hit(e),a[t][o].ship.isSunk()&&console.log(`A ${a[t][o].ship.type} was sunk!`)}else e.push({x:t,y:o})},allSunk:function(){return o.every((t=>t.isSunk()))}}},o=document.getElementById("human-board"),a=document.getElementById("computer-board"),r=document.querySelector(".start-game"),n=document.querySelector("#message"),i={name:"Human",gameboard:e(),attack:function(t,e,o){t.receiveAttack(e,o)}},s={name:"Computer",gameboard:e(),attack:function(t){let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());t.receiveAttack(e,o)}};r.addEventListener("click",(()=>{i.gameboard.placeShips(!1),s.gameboard.placeShips(!0),i.gameboard.board.forEach(((t,e)=>{t.forEach(((t,a)=>{const r=document.createElement("div");r.classList.add("square"),t.isShip&&r.classList.add("ship"),r.dataset.x=e,r.dataset.y=a,o.appendChild(r)}))})),s.gameboard.board.forEach(((t,e)=>{t.forEach(((t,o)=>{const r=document.createElement("div");r.classList.add("square"),r.dataset.x=e,r.dataset.y=o,a.appendChild(r)}))})),Array.from(a.children).forEach((t=>{t.addEventListener("click",d)}))}));let c="human",l=!0;function h(t,e){let r=c===i?s.gameboard:i.gameboard;if(r.board[t][e].isAttacked)return;r.receiveAttack(t,e);const d=r.board[t][e],u="human"===c?a.querySelector(`[data-x="${t}"][data-y="${e}"]`):o.querySelector(`[data-x="${t}"][data-y="${e}"]`);d.isShip?(d.ship.hit(),u.classList.add("hit"),d.ship.isSunk()?console.log(`You sunk the ${d.ship.type}!`):"human"===c?console.log("You hit a ship!!"):console.log("Computer hit a ship!")):("human"===c?console.log("You missed!"):console.log("Computer missed!"),u.classList.add("miss")),(c===i?s.gameboard:i.gameboard).allSunk()&&(l=!1,n.textContent=c===i?"You win!":"You lose!",console.log(n.textContent)),l&&(c="human"===c?"computer":"human","computer"===c&&setTimeout((()=>{h(Math.floor(10*Math.random()),Math.floor(10*Math.random()))}),500))}function d(t){const e=t.target.dataset.x,o=t.target.dataset.y;h(Number(e),Number(o))}})();