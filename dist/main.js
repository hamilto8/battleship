(()=>{"use strict";const t=function(t,e){let o=0;return{length:t,type:e,numHits:o,shipIsSunk:!1,hitLocations:[],hit:function(){o+=1},isSunk:function(){return t===o}}},e=function(){let e=[],o=[],n=new Array(10);for(let t=0;t<n.length;t++)n[t]=new Array(10);for(let t=0;t<n.length;t++)for(let e=0;e<n.length;e++)n[t][e]={isShip:!1,isAttacked:!1};const a={carrier:5,battleship:4,cruiser:3,submarine:3,destroyer:2};function r(){const t=Object.keys(a)[o.length];let e=prompt(`Enter orientation for ${t}`);return"horizontal"!==e&&"vertical"!==e?(alert("Invalid orientation. Please enter horizontal or vertical."),r()):e}function i(t,e,o,a){if("horizontal"===a){if(t+o>n.length)return!1;for(let a=t;a<t+o;a++)if(n[a][e].isShip)return!1}else if("vertical"===a){if(e+o>n.length)return!1;for(let a=e;a<e+o;a++)if(n[t][a].isShip)return!1}return!0}return{missedAttacks:e,ships:o,board:n,placeShips:function(e){const a={carrier:5,battleship:4,cruiser:3,submarine:3,destroyer:2};for(const[s,c]of Object.entries(a)){let a,l,d;if(e)do{a=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),d=Math.random()<.5?"horizontal":"vertical"}while(!i(a,l,c,d));else for(a=parseInt(prompt(`Enter x coordinate for ${s}`)),l=parseInt(prompt(`Enter y coordinate for ${s}`)),d=r();!i(a,l,c,d);)alert("Invalid placement. Please enter new coordinates."),a=parseInt(prompt(`Enter x coordinate for ${s}`)),l=parseInt(prompt(`Enter y coordinate for ${s}`)),d=r();const h=t(c,s);if(o.push(h),"horizontal"===d)for(let t=a;t<a+c;t++)h.hitLocations.push({x:t,y:l}),n[t][l].isShip=!0,n[t][l].ship=h;else if("vertical"===d)for(let t=l;t<l+c;t++)h.hitLocations.push({x:a,y:t}),n[a][t].isShip=!0,n[a][t].ship=h}},receiveAttack:function(t,o){n[t][o].isAttacked=!0,n[t][o].isShip?n[t][o].ship.hit():e.push({x:t,y:o})},allSunk:function(){return o.every((t=>t.isSunk()))}}};document.getElementById("human-board"),document.getElementById("computer-board");const o=document.getElementById("human-board"),n=document.getElementById("computer-board"),a=document.querySelector(".start-game"),r=document.querySelector("#message"),i={name:"Human",gameboard:e(),attack:function(t,e,o){t.receiveAttack(e,o)}},s={name:"Computer",gameboard:e(),attack:function(t){let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());t.receiveAttack(e,o)}};a.addEventListener("click",(()=>{i.gameboard.placeShips(!1),s.gameboard.placeShips(!0),i.gameboard.board.forEach(((t,e)=>{t.forEach(((t,n)=>{const a=document.createElement("div");a.classList.add("square"),t.isShip&&a.classList.add("ship"),a.dataset.x=e,a.dataset.y=n,a.addEventListener("click",(t=>{console.log("clicked "+t.target.dataset.x,t.target.dataset.y)})),o.appendChild(a)}))})),s.gameboard.board.forEach(((t,e)=>{t.forEach(((t,o)=>{const a=document.createElement("div");a.classList.add("square"),t.isShip&&a.classList.add("ship"),a.dataset.x=e,a.dataset.y=o,a.addEventListener("click",(()=>{console.log("Computer was clicked at "+a.dataset.x,a.dataset.y)})),n.appendChild(a)}))}))})),console.log(i);let c=i,l=!0;function d(){let t;t=c===i?s.gameboard:i.gameboard,t.allSunk()&&(l=!1,c===i?(c===i&&(r.textContent="You win!"),console.log("You win!")):(c===s&&(r.textContent="You lose!"),console.log("You lose!")))}function h(t,e){let o;o=c===i?s.gameboard:i.gameboard;const n=o.board[t][e];n.isShip&&(n.ship.numHits++,d(),c===s)&&h(Math.floor(10*Math.random()),Math.floor(10*Math.random()))}(()=>{document.getElementById("human-board");const t=document.getElementById("computer-board");return document.getElementById("message"),t.addEventListener("click",(function(t){let e=t.target.dataset.x,o=t.target.dataset.y;const n=s.gameboard.board[e][o];if(n.isShip){const a=n.ship;a.numHits<a.length?n.ship.numHits++:a.numHits===a.length&&alert("You sunk the "+a.type+"!"),t.target.classList.add("hit"),console.log(`Ship: ${a.type} was hit!`),console.log(`Length of ship: ${a.length}`),console.log(`Number of hits: ${a.numHits}`),d(),h(e,o)}})),{renderBoards:function(){}}})().renderBoards()})();